<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø¸Ù„Ø§Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Changa:wght@400;700&display=swap');
        body { font-family: 'Changa', sans-serif; background-color: #e0f2fe; }
        /* Ø¬Ø¹Ù„ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ ÙŠØ³ØªØ¬ÙŠØ¨ Ù„Ù„Ø­Ø§ÙˆÙŠØ© */
        canvas { background: linear-gradient(to top, #87CEEB, #E0F7FA); }
        .btn { transition: transform 0.1s; }
        .btn:active { transform: scale(0.95); }
        .correct { background-color: #48bb78 !important; color: white; }
        .incorrect { background-color: #f56565 !important; color: white; }
    </style>
</head>
<body class="h-screen w-screen overflow-hidden flex items-center justify-center p-2 sm:p-4 bg-blue-100">

    <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©: Ø§Ù„Ø¢Ù† ØªØ£Ø®Ø° Ø§Ù„Ø·ÙˆÙ„ ÙˆØ§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø­Ø¯ Ø£Ù‚ØµÙ‰ Ù„Ù„Ø­Ø¬Ù… Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ -->
    <div class="bg-white rounded-2xl shadow-2xl w-full h-full max-w-6xl max-h-[900px] border-4 border-blue-400 flex flex-col p-4 relative">
        
        <!-- Ø§Ù„Ø±Ø£Ø³ -->
        <header class="text-center mb-2 shrink-0">
            <h1 class="text-2xl sm:text-3xl font-bold text-blue-800">â˜€ï¸ Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø¸Ù„Ø§Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ ğŸŒ³</h1>
            <p class="text-sm sm:text-base text-gray-600">Ø­Ø±Ùƒ Ø§Ù„Ø´Ù…Ø³ ÙˆØ§ÙƒØªØ´Ù ÙƒÙŠÙ ÙŠØªØºÙŠØ± Ø§Ù„Ø¸Ù„!</p>
        </header>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© (Canvas): ØªØ£Ø®Ø° Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© (flex-grow) -->
        <div class="relative w-full flex-grow rounded-xl overflow-hidden border-2 border-blue-200 mb-4 bg-gray-100">
            <canvas id="shadowCanvas" class="w-full h-full block"></canvas>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆÙ‚ÙŠØª -->
            <div class="absolute top-2 right-2 bg-white/90 px-3 py-2 rounded-lg text-sm sm:text-base font-bold text-blue-900 shadow backdrop-blur-sm z-10">
                â° Ø§Ù„Ø³Ø§Ø¹Ø©: <span id="time-display">12:00 Ø¸Ù‡Ø±Ø§Ù‹</span>
            </div>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¸Ù„ -->
            <div class="absolute top-2 left-2 bg-black/70 px-3 py-2 rounded-lg text-sm sm:text-base font-bold text-white shadow backdrop-blur-sm z-10">
                ğŸ“ Ø·ÙˆÙ„ Ø§Ù„Ø¸Ù„: <span id="shadow-len-display">Ù‚ØµÙŠØ±</span>
            </div>
        </div>

        <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ù‚Ø¯Ù… -->
        <div class="shrink-0 space-y-3">
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± -->
            <div class="bg-blue-50 p-3 sm:p-4 rounded-xl border border-blue-100">
                <label for="sun-slider" class="block text-center font-bold text-blue-700 mb-2 text-sm sm:text-base">Ø­Ø±Ùƒ Ø§Ù„Ø´Ù…Ø³ Ù„ØªØºÙŠÙŠØ± Ø§Ù„ÙˆÙ‚Øª â†”ï¸</label>
                <div class="relative h-6 flex items-center">
                    <input type="range" id="sun-slider" min="0" max="180" value="90" class="w-full h-3 bg-blue-200 rounded-lg appearance-none cursor-pointer accent-yellow-500 hover:accent-yellow-400 z-10">
                    <!-- Ø¹Ù„Ø§Ù…Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ÙŠØ© -->
                    <div class="absolute w-full flex justify-between px-1 text-[10px] sm:text-xs text-gray-400 font-bold -bottom-5 pointer-events-none">
                        <span>Ø§Ù„Ø´Ø±Ù‚ (Ø´Ø±ÙˆÙ‚)</span>
                        <span>Ø§Ù„Ø¸Ù‡Ø±</span>
                        <span>Ø§Ù„ØºØ±Ø¨ (ØºØ±ÙˆØ¨)</span>
                    </div>
                </div>
                <div class="h-4"></div> <!-- Ù…Ø³Ø§ÙØ© Ù„Ù„Ø¹Ù„Ø§Ù…Ø§Øª -->
            </div>

            <!-- Ø²Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
            <div class="text-center">
                <button onclick="startQuiz()" class="btn w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white text-lg sm:text-xl font-bold py-3 px-8 rounded-full shadow-lg border-b-4 border-indigo-800 transition-all">
                    ğŸš€ Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø¢Ù†!
                </button>
            </div>
        </div>

        <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) -->
        <div id="quiz-modal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 transition-opacity duration-300">
            <div class="bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative border-4 border-indigo-200 animate-[bounceIn_0.5s_ease-out]">
                <button onclick="closeQuiz()" class="absolute top-3 left-4 text-gray-400 hover:text-red-500 text-3xl font-bold transition-colors">&times;</button>
                
                <div id="quiz-content">
                    <h2 class="text-2xl font-bold text-center text-indigo-700 mb-2">ØªØ­Ø¯ÙŠ Ø§Ù„Ø¸Ù„Ø§Ù„</h2>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                        <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
                    </div>
                    <p id="q-progress" class="text-center text-sm text-gray-500 mb-4 font-semibold">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 5</p>
                    
                    <div id="q-text" class="text-lg sm:text-xl font-bold text-gray-800 bg-indigo-50 p-5 rounded-xl mb-6 text-center border border-indigo-100 shadow-inner"></div>
                    
                    <div id="q-options" class="space-y-3"></div>
                    
                    <div id="q-feedback" class="mt-4 text-center font-bold min-h-[1.5rem] text-lg transition-all duration-300"></div>
                </div>

                <div id="quiz-result" class="hidden text-center py-4">
                    <h2 class="text-3xl font-bold text-indigo-800 mb-4">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
                    <div class="text-7xl mb-4 animate-bounce">ğŸ†</div>
                    <p id="final-score" class="text-5xl font-black text-indigo-600 mb-8 tracking-wider"></p>
                    <button onclick="restartQuiz()" class="bg-indigo-500 text-white py-3 px-8 rounded-xl font-bold text-lg hover:bg-indigo-600 shadow-lg transition-transform hover:-translate-y-1">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ğŸ”„</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© (Simulation) ---
        const canvas = document.getElementById('shadowCanvas');
        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('sun-slider');
        const timeDisplay = document.getElementById('time-display');
        const shadowLenDisplay = document.getElementById('shadow-len-display');

        // Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        let cw, ch;

        // Ø¯Ø§Ù„Ø© Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù…: Ø­Ø³Ø§Ø³Ø© Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø±Ù†Ø©
        function resizeCanvas() {
            // Ù†Ø£Ø®Ø° Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø­Ø§ÙˆÙŠ (Ø§Ù„Ù€ parent div)
            const parent = canvas.parentElement;
            canvas.width = parent.clientWidth;
            canvas.height = parent.clientHeight;
            
            cw = canvas.width;
            ch = canvas.height;
            
            drawScene(slider.value);
        }
        
        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù…
        window.addEventListener('resize', resizeCanvas);

        // Ø±Ø³Ù… Ø§Ù„Ù…Ø´Ù‡Ø¯
        function drawScene(angleVal) {
            if (!cw || !ch) return; // Ø­Ù…Ø§ÙŠØ© ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø¨Ø¹Ø¯

            const groundY = ch - 40; // Ø§Ù„Ø£Ø±Ø¶ ØªØ±ØªÙØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù‚Ø§Ø¹
            const treeX = cw / 2;    // Ø§Ù„Ø´Ø¬Ø±Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ
            // Ø¬Ø¹Ù„ Ø­Ø¬Ù… Ø§Ù„Ø´Ø¬Ø±Ø© Ù…ØªÙ†Ø§Ø³Ø¨Ø§Ù‹ Ù…Ø¹ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø´Ø§Ø´Ø©ØŒ Ø¨Ø­Ø¯ Ø£Ø¯Ù†Ù‰ ÙˆØ£Ù‚ØµÙ‰
            const treeH = Math.min(Math.max(ch * 0.25, 60), 120); 

            ctx.clearRect(0, 0, cw, ch);

            // 1. Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø´Ù…Ø³
            // Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø¹Ø±Ø¶ Ù„ÙŠÙƒÙˆÙ† Ø§Ù„Ù‚ÙˆØ³ Ø¬Ù…ÙŠÙ„Ø§Ù‹
            const arcRadius = Math.min(cw / 2 - 50, ch - 100); 
            const sunRadius = Math.max(15, cw * 0.03); // Ø´Ù…Ø³ ØªÙƒØ¨Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø©
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© (0-180) Ø¥Ù„Ù‰ Ø±Ø§Ø¯ÙŠØ§Ù† (0=Ø´Ø±Ù‚/ÙŠØ³Ø§Ø±ØŒ 180=ØºØ±Ø¨/ÙŠÙ…ÙŠÙ†)
            const radians = (angleVal * Math.PI) / 180;
            
            const sunX = treeX - arcRadius * Math.cos(radians); 
            const sunY = ch - 40 - arcRadius * Math.sin(radians);

            // 2. Ø±Ø³Ù… Ø§Ù„Ø´Ù…Ø³
            ctx.beginPath();
            ctx.arc(sunX, sunY, sunRadius, 0, Math.PI * 2);
            ctx.fillStyle = "#FDB813"; // Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ Ù„Ù„Ø´Ù…Ø³
            ctx.shadowBlur = 30;
            ctx.shadowColor = "rgba(255, 165, 0, 0.8)";
            ctx.fill();
            ctx.shadowBlur = 0;
            ctx.closePath();

            // Ø´Ø¹Ø§Ø¹ Ø§Ù„Ø´Ù…Ø³ (Ø²ÙŠÙ†Ø©)
            if (angleVal > 10 && angleVal < 170) {
                 ctx.beginPath();
                 ctx.arc(sunX, sunY, sunRadius + 5, 0, Math.PI * 2);
                 ctx.strokeStyle = "rgba(255, 255, 0, 0.3)";
                 ctx.lineWidth = 4;
                 ctx.stroke();
            }

            // 3. Ø­Ø³Ø§Ø¨ ÙˆØ±Ø³Ù… Ø§Ù„Ø¸Ù„
            const sunHeight = ch - 40 - sunY;
            const sunDistX = sunX - treeX;   
            
            let shadowLength = 0;
            // Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ ØµÙØ± (Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø±ÙˆÙ‚/Ø§Ù„ØºØ±ÙˆØ¨ ØªÙ…Ø§Ù…Ø§Ù‹)
            if (sunHeight > 10) { 
                shadowLength = -(sunDistX / sunHeight) * treeH;
            } else {
                // Ø¸Ù„ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø£ÙÙ‚
                shadowLength = (sunDistX > 0) ? -2000 : 2000; 
            }

            // Ø±Ø³Ù… Ø§Ù„Ø¸Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶
            ctx.beginPath();
            ctx.moveTo(treeX, groundY);
            ctx.lineTo(treeX + shadowLength, groundY);
            // Ø¬Ø¹Ù„ Ø§Ù„Ø¸Ù„ ÙŠØ¨Ø¯Ùˆ ÙˆØ§Ù‚Ø¹ÙŠØ§Ù‹ (ÙŠØªÙ„Ø§Ø´Ù‰ ÙˆÙŠÙƒÙˆÙ† Ø£Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©)
            ctx.lineTo(treeX + (shadowLength * 0.6), groundY + (treeH * 0.15)); 
            ctx.lineTo(treeX, groundY + (treeH * 0.1));
            ctx.fillStyle = "rgba(0, 0, 0, 0.4)";
            ctx.fill();
            ctx.closePath();

            // 4. Ø±Ø³Ù… Ø§Ù„Ø´Ø¬Ø±Ø©
            // Ø§Ù„Ø³Ø§Ù‚
            ctx.fillStyle = "#8B4513";
            const trunkWidth = treeH * 0.15;
            ctx.fillRect(treeX - trunkWidth/2, groundY - treeH, trunkWidth, treeH);
            
            // Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ (Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø³ÙŠØ·Ø©)
            ctx.beginPath();
            ctx.arc(treeX, groundY - treeH, treeH * 0.6, 0, Math.PI * 2);
            ctx.fillStyle = "#228B22";
            ctx.fill();
            // Ù„Ù…Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚
            ctx.beginPath();
            ctx.arc(treeX - treeH*0.2, groundY - treeH - treeH*0.2, treeH * 0.2, 0, Math.PI * 2);
            ctx.fillStyle = "#32CD32";
            ctx.fill();

            // 5. Ø±Ø³Ù… Ø§Ù„Ø£Ø±Ø¶ (Ø§Ù„Ø¹Ø´Ø¨)
            ctx.fillStyle = "#48bb78";
            ctx.fillRect(0, groundY, cw, ch - groundY);
            // Ø®Ø· Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„Ø¹Ù„ÙˆÙŠ
            ctx.fillStyle = "#38a169";
            ctx.fillRect(0, groundY, cw, 5);

            updateInfo(angleVal, Math.abs(shadowLength));
        }

        function updateInfo(angle, len) {
            const totalMinutes = 6 * 60 + (angle / 180) * (12 * 60);
            const hours = Math.floor(totalMinutes / 60);
            const minutes = Math.floor(totalMinutes % 60);
            const period = hours >= 12 ? "Ù…Ø³Ø§Ø¡Ù‹" : "ØµØ¨Ø§Ø­Ø§Ù‹";
            const displayHour = hours > 12 ? hours - 12 : hours;
            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª Ù„ÙŠØ¨Ø¯Ùˆ Ù…Ø«Ù„ 06:05
            const minStr = minutes.toString().padStart(2, '0');
            
            timeDisplay.textContent = `${displayHour}:${minStr} ${period}`;

            // ÙˆØµÙ Ø§Ù„Ø¸Ù„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø·ÙˆÙ„ Ø§Ù„Ø´Ø¬Ø±Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø£Ø±Ù‚Ø§Ù… Ø«Ø§Ø¨ØªØ©
            // Ù„Ø£Ù† Ø§Ù„Ø´Ø¬Ø±Ø© ÙˆØ­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø© Ù…ØªØºÙŠØ±Ø§Ù† Ø§Ù„Ø¢Ù†
            const treeH = Math.min(Math.max(ch * 0.25, 60), 120);
            const ratio = len / treeH;

            let desc = "";
            let colorClass = "";
            if (ratio > 3.5) { desc = "Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹"; colorClass="text-purple-300"; }
            else if (ratio > 1.5) { desc = "Ø·ÙˆÙŠÙ„"; colorClass="text-blue-200"; }
            else if (ratio > 0.5) { desc = "Ù…ØªÙˆØ³Ø·"; colorClass="text-green-200"; }
            else { desc = "Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹"; colorClass="text-yellow-200"; }
            
            const shadowSpan = document.getElementById('shadow-len-display');
            shadowSpan.textContent = desc;
        }

        slider.addEventListener('input', (e) => {
            drawScene(e.target.value);
        });

        // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        setTimeout(() => {
            resizeCanvas();
        }, 50);

        // --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Quiz) ---
        const questions = [
            {
                q: "ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø§Ù„Ù†Ù‡Ø§Ø± ÙŠÙƒÙˆÙ† Ø¸Ù„ Ø§Ù„Ø´Ø¬Ø±Ø© Ù‡Ùˆ Ø§Ù„Ø£Ù‚ØµØ±ØŸ",
                opts: ["ÙÙŠ Ø§Ù„ØµØ¨Ø§Ø­ Ø§Ù„Ø¨Ø§ÙƒØ±", "Ø¹Ù†Ø¯ Ø§Ù„Ø¸Ù‡ÙŠØ±Ø© (Ù…Ù†ØªØµÙ Ø§Ù„Ù†Ù‡Ø§Ø±)", "Ù‚Ø¨Ù„ Ø§Ù„ØºØ±ÙˆØ¨ Ø¨Ù‚Ù„ÙŠÙ„"],
                a: 1 
            },
            {
                q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø´Ù…Ø³ ÙÙŠ Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚ (Ø§Ù„ÙŠÙ…ÙŠÙ†)ØŒ ÙÙŠ Ø£ÙŠ Ø§ØªØ¬Ø§Ù‡ Ø³ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø¸Ù„ØŸ",
                opts: ["Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚ Ø£ÙŠØ¶Ø§Ù‹", "Ø¬Ù‡Ø© Ø§Ù„ØºØ±Ø¨ (Ø§Ù„ÙŠØ³Ø§Ø±)", "Ù„Ø§ ÙŠØªÙƒÙˆÙ† Ø¸Ù„"],
                a: 1
            },
            {
                q: "Ù„Ù…Ø§Ø°Ø§ ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø¸Ù„ Ù„Ù„Ø£Ø´ÙŠØ§Ø¡ØŸ",
                opts: ["Ù„Ø£Ù† Ø§Ù„Ø¬Ø³Ù… ÙŠØ­Ø¬Ø¨ Ø¶ÙˆØ¡ Ø§Ù„Ø´Ù…Ø³", "Ù„Ø£Ù† Ø§Ù„Ø¬Ø³Ù… ÙŠØµØ¯Ø± Ø¶ÙˆØ¡Ø§Ù‹ Ø£Ø³ÙˆØ¯", "Ù„Ø£Ù† Ø§Ù„Ø£Ø±Ø¶ ØªØ¹ÙƒØ³ ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø³Ù…"],
                a: 0
            },
            {
                q: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ù„Ø·ÙˆÙ„ Ø§Ù„Ø¸Ù„ ÙƒÙ„Ù…Ø§ Ø§Ù‚ØªØ±Ø¨Øª Ø§Ù„Ø´Ù…Ø³ Ù…Ù† Ø§Ù„ØºØ±ÙˆØ¨ØŸ",
                opts: ["ÙŠØµØ¨Ø­ Ø£Ù‚ØµØ±", "ÙŠØµØ¨Ø­ Ø£Ø·ÙˆÙ„", "ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ"],
                a: 1
            },
            {
                q: "Ø£ÙŠ Ù…Ù† Ø§Ù„Ø£Ø¬Ø³Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ© Ø³ÙŠØªÙƒÙˆÙ† Ù„Ù‡ Ø¸Ù„ ÙˆØ§Ø¶Ø­ØŸ",
                opts: ["Ù‚Ø·Ø¹Ø© Ø²Ø¬Ø§Ø¬ Ø´ÙØ§ÙØ©", "ØµÙ†Ø¯ÙˆÙ‚ Ø®Ø´Ø¨ÙŠ (Ù…Ø¹ØªÙ…)", "Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø§Ù„Ù†Ù‚ÙŠ"],
                a: 1
            }
        ];

        let qIndex = 0;
        let score = 0;
        
        async function playSound(type) {
            if(Tone.context.state !== 'running') await Tone.start();
            const synth = new Tone.Synth().toDestination();
            if (type === 'correct') {
                synth.triggerAttackRelease("E5", "16n", Tone.now());
                synth.triggerAttackRelease("G5", "16n", Tone.now() + 0.1);
            }
            else synth.triggerAttackRelease("C3", "8n");
        }

        function startQuiz() {
            document.getElementById('quiz-modal').classList.remove('hidden');
            qIndex = 0;
            score = 0;
            document.getElementById('quiz-content').classList.remove('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            showQuestion();
        }

        function closeQuiz() {
            document.getElementById('quiz-modal').classList.add('hidden');
        }

        function showQuestion() {
            const q = questions[qIndex];
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const progress = ((qIndex) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            
            document.getElementById('q-progress').textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${qIndex + 1} Ù…Ù† ${questions.length}`;
            document.getElementById('q-text').textContent = q.q;
            document.getElementById('q-feedback').textContent = "";
            
            const optsDiv = document.getElementById('q-options');
            optsDiv.innerHTML = "";
            
            q.opts.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "w-full bg-white hover:bg-indigo-50 text-gray-800 font-semibold py-4 px-6 rounded-xl text-right border-2 border-gray-200 hover:border-indigo-300 transition-all shadow-sm flex items-center justify-between group";
                // Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ø¦Ø±Ø© Ø§Ø®ØªÙŠØ§Ø± ÙØ§Ø±ØºØ© Ù„Ù„Ø¬Ù…Ø§Ù„ÙŠØ©
                btn.innerHTML = `<span>${opt}</span> <span class="w-6 h-6 rounded-full border-2 border-gray-300 group-hover:border-indigo-400"></span>`;
                
                btn.onclick = () => checkAnswer(idx, btn);
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIdx, btnElement) {
            const correctIdx = questions[qIndex].a;
            const allBtns = document.querySelectorAll('#q-options button');
            
            allBtns.forEach(b => b.disabled = true);

            const checkMark = `<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`;
            const xMark = `<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>`;

            if (selectedIdx === correctIdx) {
                score++;
                btnElement.classList.add('correct', 'border-green-500');
                btnElement.querySelector('span:last-child').innerHTML = checkMark;
                btnElement.querySelector('span:last-child').classList.add('bg-green-500', 'border-green-500');
                
                document.getElementById('q-feedback').textContent = "Ù…Ù…ØªØ§Ø²! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸ‰";
                document.getElementById('q-feedback').className = "mt-4 text-center font-bold text-green-600 animate-pulse";
                playSound('correct');
            } else {
                btnElement.classList.add('incorrect', 'border-red-500');
                btnElement.querySelector('span:last-child').innerHTML = xMark;
                btnElement.querySelector('span:last-child').classList.add('bg-red-500', 'border-red-500');

                // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                const correctBtn = allBtns[correctIdx];
                correctBtn.classList.add('ring-2', 'ring-green-400', 'bg-green-50');
                
                document.getElementById('q-feedback').textContent = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! ğŸ˜”";
                document.getElementById('q-feedback').className = "mt-4 text-center font-bold text-red-500";
                playSound('wrong');
            }

            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
            const progress = ((qIndex + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            setTimeout(() => {
                qIndex++;
                if (qIndex < questions.length) {
                    showQuestion();
                } else {
                    showFinalResult();
                }
            }, 2000);
        }

        function showFinalResult() {
            document.getElementById('quiz-content').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            document.getElementById('final-score').textContent = `${score} / ${questions.length}`;
            playSound('correct'); // ØµÙˆØª Ø§Ø­ØªÙØ§Ù„ÙŠ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
        }

        function restartQuiz() {
            startQuiz();
        }

    </script>
</body>
</html>